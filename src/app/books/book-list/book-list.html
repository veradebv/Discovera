<section class="bm-page bm-container">
  <header class="bm-page-header">
    <p class="bm-kicker">Discovera</p>
    <h1 class="bm-title">New Books & Reviews</h1>
    <p class="bm-subtitle">Latest additions and reader notes across the shelf.</p>
  </header>

  <div class="bm-tools">
    <input
      type="text"
      placeholder="Search books by title or author..."
      #searchInput
      (input)="setSearch(searchInput.value)"
      class="bm-input"
    />

    <div class="bm-filters">
      <button (click)="setFilter('all')" class="bm-chip">All</button>
      <button (click)="setFilter('want-to-read')" class="bm-chip">Want to Read</button>
      <button (click)="setFilter('reading')" class="bm-chip">Reading</button>
      <button (click)="setFilter('read')" class="bm-chip">Read</button>
    </div>
  </div>

  <hr class="bm-divider" />

  @let filteredList = (filteredBooks$ | async) ?? [];
  @if (filteredList.length > 0) {
    <ul class="bm-list">
      @for (book of filteredList; track book.id) {
        <li class="bm-card">
          <a [routerLink]="['books', book.id]" class="bm-cover">
            <img
              src="{{ book.image || 'https://via.placeholder.com/140x200?text=No+Cover' }}"
              alt="{{ book.title }} cover"
            />
          </a>

          <div class="bm-meta">
            <a [routerLink]="['books', book.id]" class="bm-book-title">{{ book.title }}</a>
            <div class="bm-book-author">{{ book.author }}</div>
            <div class="bm-book-rating">â˜… {{ book.rating | number: '1.1-1' }}</div>

            @if (book.status) {
              <div class="bm-book-status">Status: {{ book.status }}</div>
            }

            <div class="bm-book-reviews">{{ book.reviews.length }} review(s)</div>
          </div>
        </li>
      }
    </ul>
  } @else {
    <p class="bm-empty">No books found matching your search.</p>
  }
</section>